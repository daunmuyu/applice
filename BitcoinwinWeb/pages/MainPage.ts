import { Component } from "jack-one-script";
import Vue from "vue";
import { Home } from "./Home";
import { Quotation } from "./Quotation";
import { Position } from "./Position/Position";

import { NavigationEvent } from "jack-one-script";
import { BaseComponent } from "../BaseComponent";
import { My } from "./My/My";
import { ApiHelper } from "../ServerApis/ApiHelper";
import { Login } from "./RegisterLogin/Login";
import { Assets } from "./Assets/Assets";
import { DemoTrade } from "./My/DemoTrade";
import { AccountApi } from "../ServerApis/AccountApi";
import { Setting } from "./My/Setting";
import { setTimeout } from "timers";

var html = require("./mainPage.html");

export class MainPage extends Component {
    static instance: MainPage;
    vm: Vue;
    model = {
        tabs: [],
        textRes: {},
    };
    pages: BaseComponent[] = [];

    constructor() {
        super(html);

        MainPage.instance = this;

        this.model.tabs = [
            {
                text: "首页",
                icon: `<svg viewBox="0 0 21 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g class='textfill'>
            <path d="M20.7716291,9.07806167 C20.7322203,8.98854862 20.6816539,8.90372637 20.6209852,8.82536552 C20.5612068,8.73684372 20.4918929,8.65431603 20.4141348,8.57908177 L17.2670718,5.62605177 L17.2645399,5.62866423 C17.1788415,5.53939625 17.0476258,5.50177149 16.9233665,5.53083624 C16.7991072,5.559901 16.7020856,5.65091137 16.6711012,5.76747194 C16.6401167,5.88403251 16.6802266,6.00711847 16.7753906,6.08750724 L19.9216942,9.04077474 C19.9637713,9.08299355 20.0015738,9.12878985 20.0346137,9.17757265 C20.0730804,9.22583205 20.1052921,9.27821161 20.13057,9.33360777 C20.251698,9.60256514 20.2279848,9.90969681 20.066806,10.1594749 C19.9056272,10.409253 19.6265342,10.5713788 19.3163339,10.595426 C19.2906072,10.5980976 19.2647438,10.5994454 19.23886,10.5994635 L18.4924769,10.5994635 L18.4924769,17.5063332 C18.4917789,18.0086116 18.0577339,18.4155519 17.5222801,18.4159444 L12.9847367,18.4159444 C12.4493817,18.415421 12.0154908,18.008519 12.0147931,17.5063332 L12.0147931,10.5989885 L8.89811198,10.5989885 L8.89811198,17.5063332 C8.89755378,18.0084805 8.46373542,18.4154208 7.92842159,18.4159444 L3.390625,18.4159444 C2.85517119,18.4155519 2.42112619,18.0086116 2.42042824,17.5063332 L2.42042824,10.5989885 L1.67100694,10.5989885 C1.63659037,10.5990588 1.60222092,10.5965971 1.5682147,10.5916261 C1.26467719,10.5598442 0.99482743,10.3958068 0.839906735,10.1488991 C0.68498604,9.9019915 0.663091966,9.60105695 0.780815972,9.33669523 C0.806745631,9.27953487 0.83998769,9.22554373 0.879810475,9.17591018 C0.91144357,9.12899522 0.947452361,9.08480592 0.987413194,9.04386219 L9.54499421,1.01648451 C10.0480211,0.545269882 10.8628585,0.545269882 11.3658854,1.01648451 L14.8036024,4.24002289 C14.8901782,4.3265962 15.0201438,4.36207322 15.142722,4.33259313 C15.2653001,4.30311304 15.3610364,4.2133546 15.392527,4.0983863 C15.4240175,3.983418 15.3862644,3.86148637 15.2940177,3.7802299 L15.2962963,3.77809243 L11.8588325,0.553604064 C11.0839334,-0.172495686 9.82846536,-0.172495686 9.05356626,0.553604064 L0.490921586,8.58573167 C0.428895196,8.64691106 0.372646331,8.7130248 0.32280816,8.78332866 C0.247768771,8.87680635 0.185428286,8.9786842 0.137225116,9.08661154 C0.0531715564,9.27685218 0.010145518,9.48083297 0.0106336806,9.68676489 C0.0106336806,10.4830903 0.647135417,11.1511676 1.45833333,11.2359538 C1.52905589,11.2467892 1.60061366,11.2521115 1.67227286,11.251866 L1.72518808,11.251866 L1.72518808,17.5060957 C1.72630439,18.3690865 2.47189999,19.0683809 3.39189091,19.0692969 L7.92842159,19.0692969 C8.84872579,19.0689042 9.59479272,18.3693803 9.59563079,17.5060957 L9.59563079,11.252341 L11.3172743,11.252341 L11.3172743,17.5060957 C11.3182514,18.3691407 12.0639285,19.0685115 12.9839771,19.0692969 L17.5222801,19.0692969 C18.442271,19.0683809 19.1878666,18.3690865 19.1889829,17.5060957 L19.1889829,11.252341 L19.2396195,11.252341 C19.2851147,11.2525514 19.3305877,11.2504107 19.3758319,11.2459286 C20.2331091,11.1777672 20.9042969,10.4930651 20.9042969,9.68723988 C20.9036775,9.47792733 20.8585757,9.27083121 20.7716291,9.07806167 Z" id="路径"></path>
        </g>
    </g>
</svg>`,
                icon2: `<svg style='width:0.6rem;height:0.6rem;' viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="首页" class='mainfillcolor'><g id="shouye"><path d="M13.4220679,4.6756848 L10.9625772,2.21619406 C10.4081262,1.66218268 9.50964968,1.66218268 8.95519869,2.21619406 L2.82696759,8.3429784 C2.78249573,8.38971698 2.74215713,8.44022092 2.70640432,8.49392361 C2.65263185,8.56506449 2.60799644,8.64267015 2.5735436,8.72492284 C2.51313648,8.87011453 2.48199805,9.02580667 2.48191551,9.18306327 C2.48191551,9.79046103 2.93764468,10.3002025 3.51875965,10.3645833 C3.56891397,10.3727816 7.79200424,10.3768808 7.79200424,10.3768808 L16.2434896,10.3768808 C16.2757112,10.3770826 16.3079168,10.3753918 16.3399402,10.3718171 C16.721215,10.3401855 17.0641681,10.1275566 17.2620443,9.800118 C17.4599205,9.47267942 17.4886946,9.07018723 17.3394097,8.71793017 C17.311218,8.64960269 17.2750385,8.58485192 17.2316262,8.52502894 C17.1888191,8.4575252 17.1392096,8.39458415 17.0835745,8.33719136 L15.3737461,6.62712191 L14.8316937,6.0855517" id="路径" fill-opacity="0.46"></path><path d="M19.7825039,9.21682099 C19.7449718,9.12593973 19.6968132,9.03982095 19.6390336,8.96026235 C19.5821017,8.87038748 19.5160884,8.78659834 19.4420332,8.71021412 L16.4448302,5.71204668 L16.442419,5.71469907 C16.3608015,5.62406662 16.2358341,5.58586676 16.1174919,5.61537577 C15.9991497,5.64488479 15.9067482,5.73728627 15.8772392,5.85562848 C15.8477302,5.97397069 15.88593,6.09893804 15.9765625,6.18055556 L18.9730421,9.17896412 C19.0131155,9.22182825 19.0491179,9.26832456 19.0805845,9.31785301 C19.1172195,9.36685006 19.1478972,9.42003024 19.1719715,9.47627315 C19.2873314,9.74934156 19.2647474,10.0611678 19.1112438,10.3147638 C18.9577402,10.5683597 18.6919373,10.7329637 18.3965085,10.7573785 C18.3720069,10.7600908 18.3473751,10.7614593 18.3227238,10.7614776 L17.6118827,10.7614776 L17.6118827,17.7739198 C17.611218,18.2838755 17.1978418,18.6970359 16.6878858,18.6974344 L12.3664159,18.6974344 C11.856554,18.696903 11.4433246,18.2837815 11.4426601,17.7739198 L11.4426601,10.7609954 L8.47439236,10.7609954 L8.47439236,17.7739198 C8.47386074,18.2837424 8.0607004,18.6969028 7.5508777,18.6974344 L3.22916667,18.6974344 C2.71921065,18.6970359 2.30583447,18.2838755 2.30516975,17.7739198 L2.30516975,10.7609954 L1.59143519,10.7609954 C1.5586575,10.7610667 1.52592469,10.7585674 1.49353781,10.7535204 C1.20445446,10.7212528 0.947454695,10.554708 0.799911176,10.3040263 C0.652367657,10.0533447 0.631516159,9.74781032 0.743634259,9.47940779 C0.768329172,9.42137373 0.799988276,9.36655733 0.837914738,9.31616512 C0.868041495,9.26853306 0.902335582,9.22366833 0.940393519,9.18209877 L9.09047068,1.0320216 C9.56954393,0.553604401 10.3455795,0.553604401 10.8246528,1.0320216 L14.098669,4.30483218 C14.1811221,4.39272877 14.3048989,4.42874806 14.42164,4.39881736 C14.538381,4.36888666 14.6295585,4.27775626 14.6595495,4.16103065 C14.6895405,4.04430505 14.6535851,3.92050967 14.5657311,3.83801119 L14.5679012,3.83584105 L11.2941262,0.562065972 C10.556127,-0.175132304 9.3604432,-0.175132304 8.62244406,0.562065972 L0.467544367,8.71696566 C0.408471615,8.77908019 0.354901268,8.84620448 0.307436343,8.91758295 C0.235970258,9.01248946 0.176598368,9.11592453 0.130690586,9.22550154 C0.0506395775,9.41865003 0.00966239805,9.6257487 0.0101273148,9.83482832 C0.0101273148,10.6433256 0.616319444,11.3216146 1.38888889,11.4076968 C1.45624371,11.4186978 1.52439396,11.4241015 1.59264082,11.4238522 L1.64303627,11.4238522 L1.64303627,17.7736786 C1.64409942,18.6498603 2.35419046,19.3598435 3.2303723,19.3607735 L7.5508777,19.3607735 C8.4273579,19.3603748 9.13789783,18.6501585 9.13869599,17.7736786 L9.13869599,11.4243345 L10.7783565,11.4243345 L10.7783565,17.7736786 C10.779287,18.6499153 11.4894557,19.3599761 12.3656925,19.3607735 L16.6878858,19.3607735 C17.5640676,19.3598435 18.2741587,18.6498603 18.2752218,17.7736786 L18.2752218,11.4243345 L18.3234471,11.4243345 C18.3667759,11.4245481 18.4100836,11.4223747 18.4531732,11.4178241 C19.2696277,11.3486208 19.9088542,10.6534529 19.9088542,9.83531057 C19.9082643,9.62279865 19.8653102,9.41253703 19.7825039,9.21682099 Z" id="路径"></path></g></g></g></svg>`,
                selected: false,
                enable: !ApiHelper.IsDemoMode,
            },
            {
                text: "行情",
                icon: `<svg viewBox="0 0 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="行情" transform="translate(-1.000000, 0.000000)">
            <g id="hangqing-copy" transform="translate(2.000000, 1.000000)" fill-rule="nonzero" class=textstroke stroke-width="0.8">
                <path d="M18.127689,18.9137829 L1.13122751,18.9137829 C0.700937358,18.9137829 0.37821972,18.5197089 0.37821972,18.1256348 L0.37821972,13.0589681 C0.37821972,12.2145237 0.754723615,11.8204496 1.18501379,12.2145237 L3.49782342,14.1285978 C3.82054103,14.4100792 4.25083121,14.8041533 4.51976254,14.4663755 L7.15528978,11.1448941 C7.42422114,10.8071163 7.85451129,10.3567459 8.17722893,10.6382274 L10.4362523,12.7211903 C10.7589699,13.0026718 11.4044051,13.4530422 11.6195502,13.1152644 L17.2671086,6.02193109 C18.0201164,5.12119034 18.8806967,5.34637552 18.8806967,6.41600516 L18.8806967,18.1256348 C18.8806967,18.5197089 18.5041928,18.913783 18.127689,18.9137829 Z" id="路径"></path>
                <path d="M11.4895667,10.2437268 C11.2744217,10.5252083 10.951704,10.6940972 10.6289864,10.7503935 C10.3062688,10.8066898 9.9297649,10.6940972 9.71461982,10.468912 L7.13287884,8.21706018 L4.55113788,11.7637268 C4.3359928,12.0452083 4.06706145,12.2140972 3.69055755,12.2703935 L3.52919873,12.2703935 C3.26026738,12.2703935 2.93754976,12.1578009 2.72240469,11.988912 L0.463381315,10.074838 C-0.0744813993,9.62446761 -0.128267656,8.78002315 0.302022519,8.21706018 C0.732312695,7.65409721 1.53910674,7.59780092 2.07696943,8.04817131 L3.31405366,9.11780092 L5.89579464,5.57113426 C6.11093972,5.28965277 6.43365735,5.1207639 6.75637495,5.06446759 C7.07909256,5.00817128 7.45559645,5.1207639 7.72452781,5.34594908 L10.3062688,7.59780092 L13.6410176,3.2629861 L12.726651,2.47483797 C12.0812157,1.911875 12.2425745,1.29261574 13.0493686,1.12372685 L17.8363466,0.0540972305 C18.696927,-0.114791667 18.9120721,0.27928241 18.4279956,1.01113426 L11.4895667,10.2437268 Z" id="路径"></path>
            </g>
        </g>
    </g>
</svg>`,
                icon2: `<svg viewBox="0 0 21 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="分组-4" transform="translate(1.000000, 1.000000)" fill-rule="nonzero">
            <path d="M2.60075874,17.0931391 C2.25746804,17.0931391 2,16.9732296 2,16.8533201 L2,15.311627 C2,15.0546782 2.30037937,14.9347687 2.64367009,15.0546782 L4.48885763,15.6370956 C4.74632566,15.7227452 5.08961637,15.8426547 5.30417305,15.7398751 L7.40682862,14.7292096 C7.62138531,14.6264301 7.96467601,14.4893907 8.22214405,14.5750403 L10.0244203,15.2088475 C10.2818883,15.2944971 10.7968243,15.4315365 10.9684697,15.3287569 L15.4741602,12.1703866 C16.074919,11.8963078 16.7615004,11.9648275 16.7615004,12.290296 L16.7615004,16.8533201 C16.7615004,16.9732296 16.461121,17.0931391 16.1607416,17.0931391 L2.60075874,17.0931391 Z" id="路径-copy" class="mainfillcolor opacity6"></path>
            <path d="M17.7494693,18.0518154 C17.9008752,18.0518155 18.102477,17.8408056 18.102477,17.6636673 L18.102477,5.95403767 C18.102477,5.2825385 17.7218238,5.18726487 17.2018189,5.80911173 L11.5787066,12.8681862 C11.3406209,13.2419807 10.9424613,13.2456363 10.5223302,13.0516346 C10.2820357,12.9406751 10.0217632,12.7583642 9.78688147,12.5532927 L7.53608195,10.4777052 C7.53774492,10.4791557 7.35441041,10.5999754 7.09041177,10.9315568 L4.45447288,14.2535561 C4.15007047,14.6358856 3.73352331,14.604989 3.32412685,14.3403262 C3.21989214,14.2729415 3.11852681,14.1938967 2.99378308,14.0871935 C2.95706099,14.0557822 2.92183128,14.0250759 2.86457466,13.9747864 L0.536637838,12.0475403 C0.456926964,11.9745384 0.4,12.034122 0.4,12.5970007 L0.4,17.6636673 C0.4,17.864516 0.570427203,18.0518154 0.75300779,18.0518154 L17.7494692,18.0518154 Z M3.84091425,13.7397558 C3.83937846,13.7450345 3.83342852,13.7492119 3.82820112,13.7557778 L3.84091425,13.7397558 Z" id="路径" class="mainstrokecolor" stroke-width="0.8"></path>
            <path d="M11.4744043,10.228426 C11.2592593,10.5099075 10.9365416,10.6787964 10.613824,10.7350927 C10.2911064,10.791389 9.91460251,10.6787964 9.69945743,10.4536112 L7.11771644,8.20175936 L4.53597548,11.748426 C4.32083041,12.0299075 4.05189905,12.1987964 3.67539516,12.2550927 L3.51403634,12.2550927 C3.24510498,12.2550927 2.92238737,12.1425001 2.70724229,11.9736112 L0.448218919,10.0595372 C-0.0896437947,9.60916679 -0.143430052,8.76472233 0.286860124,8.20175936 C0.7171503,7.63879639 1.52394435,7.5825001 2.06180704,8.03287049 L3.29889126,9.1025001 L5.88063225,5.55583344 C6.09577732,5.27435195 6.41849496,5.10546308 6.74121255,5.04916677 C7.06393016,4.99287046 7.44043406,5.10546308 7.70936542,5.33064826 L10.2911064,7.5825001 L13.6258552,3.24768528 L12.7114886,2.45953715 C12.0660533,1.89657418 12.2274121,1.27731492 13.0342062,1.10842603 L17.8211843,0.0387964108 C18.6817646,-0.130092486 18.8969097,0.263981591 18.4128332,0.995833437 L11.4744043,10.228426 Z" id="路径" class="mainstrokecolor" stroke-width="0.8"></path>
        </g>
    </g>
</svg>`,
                selected: false,
                enable: true
            },
            {
                text: "交易",
                icon: `<svg viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="交易">
            <g id="分组-23-copy-2" transform="translate(1.000000, 1.000000)" class="textstroke" stroke-width="0.8">
                <g id="fangxinjiaoyi" transform="translate(5.443038, 4.683544)" fill-rule="nonzero">
                    <path d="M8.53431139,9.4290451 C8.28618805,9.81992098 7.95309216,10.14295 7.53523466,10.398661 C7.11712397,10.6544567 6.64581835,10.8462135 6.12173986,10.974143 C5.62832071,11.0944353 5.12257873,11.1580722 4.60419744,11.1651806 L4.60419744,11.6336562 L3.73638827,11.6336562 L3.73638827,11.1202878 C3.73645158,11.1202878 3.73655707,11.1203089 3.73655707,11.1203089 C3.45325885,11.0866711 3.1747716,11.0347334 2.90145402,10.9634382 C2.38400115,10.828633 1.9199964,10.6191475 1.50916545,10.3347914 C1.09801799,10.0507738 0.757916628,9.67775352 0.488882494,9.21587852 C0.219552955,8.75436317 0.0564866037,8.20365469 0,7.56428193 L1.87053632,7.32983257 C1.87053632,7.79873132 1.95555111,8.19292867 2.12562289,8.5126362 C2.29565245,8.83232258 2.51883474,9.0880336 2.79519081,9.27987505 C3.07148359,9.47169533 3.37970176,9.60686021 3.7198031,9.68479844 C4.05990445,9.7630117 4.40699014,9.80202313 4.76133447,9.80202313 C4.95963901,9.80202313 5.18978451,9.78067686 5.45215083,9.73804778 C5.71420064,9.6954187 5.96228176,9.61018168 6.1961199,9.48233676 C6.42991584,9.35447066 6.62822036,9.1769729 6.79128671,8.94954729 C6.95403655,8.72248133 7.03573851,8.42405658 7.03573851,8.05446351 C7.03573851,7.62827848 6.87267218,7.3121886 6.54685601,7.1061304 C6.22072333,6.90032607 5.8098924,6.73679118 5.31398334,6.61597001 C4.81782109,6.4954027 4.28642066,6.38520176 3.7198031,6.28564223 C3.15286905,6.18633657 2.62146861,6.03722999 2.12562286,5.83808975 C1.62941841,5.63922457 1.21858747,5.35522813 0.892750194,4.98561391 C0.566617512,4.61627469 0.4038677,4.09780774 0.4038677,3.42987457 C0.4038677,2.91834674 0.517157447,2.47449655 0.743969042,2.09787972 C0.970485233,1.72160138 1.26804754,1.41264103 1.63671926,1.17080826 C2.00505336,0.929419759 2.41588432,0.751900846 2.86954972,0.638018794 C3.15852402,0.565644546 3.44751944,0.516499462 3.73659926,0.490223876 C3.73651486,0.490223876 3.73645156,0.490245025 3.73636716,0.490245025 L3.73636716,0 L4.60417632,0 L4.60417632,0.485209925 C4.86559309,0.507550519 5.16184717,0.551152769 5.49464766,0.616778286 C5.99751993,0.716337819 6.47574658,0.893835583 6.92945418,1.14956775 C7.38280308,1.40527878 7.77238561,1.74633258 8.09851829,2.17251763 C8.42433445,2.59870266 8.58740078,3.13887555 8.58740078,3.79223233 L6.84443939,4.02659707 C6.84443939,3.6573425 6.77335107,3.33397498 6.63184967,3.05698115 C6.49003175,2.77990271 6.30238308,2.5527521 6.06854495,2.37497931 C5.834749,2.19748155 5.56541947,2.06259172 5.26085172,1.97005592 C4.95592526,1.87779517 4.64076497,1.83156959 4.31492769,1.83156959 C4.0738098,1.83156959 3.8260452,1.85283125 3.57100084,1.89546033 C3.31591427,1.93808941 3.08211834,2.01636614 2.86952862,2.1299097 C2.65698111,2.24379175 2.48328001,2.39626212 2.34878404,2.5880824 C2.21395045,2.77992386 2.14685018,3.03229224 2.14685018,3.34467985 C2.14685018,3.72825697 2.31325044,4.01595567 2.64634634,4.20777595 C2.97912574,4.39959623 3.39729973,4.55936539 3.90046742,4.6873161 C4.4032975,4.8151822 4.9453327,4.93600337 5.52655195,5.04952578 C6.10741247,5.16340783 6.64946878,5.32660422 7.15263647,5.53968616 C7.65546655,5.75287389 8.07361945,6.05489511 8.40671535,6.44549596 C8.73949474,6.83637184 8.90625371,7.36554366 8.90625371,8.03322298 C8.90627482,8.57322663 8.7820338,9.03844425 8.53431139,9.4290451 Z" id="路径"></path>
                </g>
                <circle id="椭圆形-copy-8" cx="10" cy="10" r="10"></circle>
            </g>
        </g>
    </g>
</svg>`,
                icon2: `<svg viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="分组-7">
            <ellipse id="椭圆形" class="mainfillcolor opacity6" fill-rule="nonzero" cx="14" cy="6.72727273" rx="3" ry="2.72727273"></ellipse>
            <g id="交易-copy-2">
                <g id="分组-23-copy-2" transform="translate(1.000000, 1.000000)" class="mainstrokecolor" stroke-width="0.8">
                    <g id="fangxinjiaoyi" transform="translate(5.443038, 4.683544)" fill-rule="nonzero">
                        <path d="M8.53431139,9.4290451 C8.28618805,9.81992098 7.95309216,10.14295 7.53523466,10.398661 C7.11712397,10.6544567 6.64581835,10.8462135 6.12173986,10.974143 C5.62832071,11.0944353 5.12257873,11.1580722 4.60419744,11.1651806 L4.60419744,11.6336562 L3.73638827,11.6336562 L3.73638827,11.1202878 C3.73645158,11.1202878 3.73655707,11.1203089 3.73655707,11.1203089 C3.45325885,11.0866711 3.1747716,11.0347334 2.90145402,10.9634382 C2.38400115,10.828633 1.9199964,10.6191475 1.50916545,10.3347914 C1.09801799,10.0507738 0.757916628,9.67775352 0.488882494,9.21587852 C0.219552955,8.75436317 0.0564866037,8.20365469 0,7.56428193 L1.87053632,7.32983257 C1.87053632,7.79873132 1.95555111,8.19292867 2.12562289,8.5126362 C2.29565245,8.83232258 2.51883474,9.0880336 2.79519081,9.27987505 C3.07148359,9.47169533 3.37970176,9.60686021 3.7198031,9.68479844 C4.05990445,9.7630117 4.40699014,9.80202313 4.76133447,9.80202313 C4.95963901,9.80202313 5.18978451,9.78067686 5.45215083,9.73804778 C5.71420064,9.6954187 5.96228176,9.61018168 6.1961199,9.48233676 C6.42991584,9.35447066 6.62822036,9.1769729 6.79128671,8.94954729 C6.95403655,8.72248133 7.03573851,8.42405658 7.03573851,8.05446351 C7.03573851,7.62827848 6.87267218,7.3121886 6.54685601,7.1061304 C6.22072333,6.90032607 5.8098924,6.73679118 5.31398334,6.61597001 C4.81782109,6.4954027 4.28642066,6.38520176 3.7198031,6.28564223 C3.15286905,6.18633657 2.62146861,6.03722999 2.12562286,5.83808975 C1.62941841,5.63922457 1.21858747,5.35522813 0.892750194,4.98561391 C0.566617512,4.61627469 0.4038677,4.09780774 0.4038677,3.42987457 C0.4038677,2.91834674 0.517157447,2.47449655 0.743969042,2.09787972 C0.970485233,1.72160138 1.26804754,1.41264103 1.63671926,1.17080826 C2.00505336,0.929419759 2.41588432,0.751900846 2.86954972,0.638018794 C3.15852402,0.565644546 3.44751944,0.516499462 3.73659926,0.490223876 C3.73651486,0.490223876 3.73645156,0.490245025 3.73636716,0.490245025 L3.73636716,0 L4.60417632,0 L4.60417632,0.485209925 C4.86559309,0.507550519 5.16184717,0.551152769 5.49464766,0.616778286 C5.99751993,0.716337819 6.47574658,0.893835583 6.92945418,1.14956775 C7.38280308,1.40527878 7.77238561,1.74633258 8.09851829,2.17251763 C8.42433445,2.59870266 8.58740078,3.13887555 8.58740078,3.79223233 L6.84443939,4.02659707 C6.84443939,3.6573425 6.77335107,3.33397498 6.63184967,3.05698115 C6.49003175,2.77990271 6.30238308,2.5527521 6.06854495,2.37497931 C5.834749,2.19748155 5.56541947,2.06259172 5.26085172,1.97005592 C4.95592526,1.87779517 4.64076497,1.83156959 4.31492769,1.83156959 C4.0738098,1.83156959 3.8260452,1.85283125 3.57100084,1.89546033 C3.31591427,1.93808941 3.08211834,2.01636614 2.86952862,2.1299097 C2.65698111,2.24379175 2.48328001,2.39626212 2.34878404,2.5880824 C2.21395045,2.77992386 2.14685018,3.03229224 2.14685018,3.34467985 C2.14685018,3.72825697 2.31325044,4.01595567 2.64634634,4.20777595 C2.97912574,4.39959623 3.39729973,4.55936539 3.90046742,4.6873161 C4.4032975,4.8151822 4.9453327,4.93600337 5.52655195,5.04952578 C6.10741247,5.16340783 6.64946878,5.32660422 7.15263647,5.53968616 C7.65546655,5.75287389 8.07361945,6.05489511 8.40671535,6.44549596 C8.73949474,6.83637184 8.90625371,7.36554366 8.90625371,8.03322298 C8.90627482,8.57322663 8.7820338,9.03844425 8.53431139,9.4290451 Z" id="路径"></path>
                    </g>
                    <circle id="椭圆形-copy-8" cx="10" cy="10" r="10"></circle>
                </g>
            </g>
        </g>
    </g>
</svg>`,
                selected: false,
                enable: true
            },
            {
                text: "资产",
                icon: `<svg viewBox="0 0 19 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="wallet--2-copy" class="textfill">
            <g id="wallet-" transform="translate(0.000000, 0.000000)">
                <path d="M1.96778989,3.92616452 C0.888800793,3.92616452 0.00941526264,3.04677899 0.00941526264,1.96778989 C0.00941526264,0.888800793 0.888800793,0.00941526264 1.96778989,0.00941526264 L14.0193261,0.00941526264 C14.2697721,0.00941526264 14.4712587,0.210901883 14.4712587,0.461347869 L14.4712587,1.66650149 C14.4712587,1.91694747 14.2697721,2.11843409 14.0193261,2.11843409 C13.7688801,2.11843409 13.5673935,1.91694747 13.5673935,1.66650149 L13.5673935,0.913280476 L1.96778989,0.913280476 C1.38592666,0.913280476 0.913280476,1.38592666 0.913280476,1.96778989 C0.913280476,2.54965312 1.38592666,3.02229931 1.96778989,3.02229931 C2.21823588,3.02229931 2.4197225,3.22378593 2.4197225,3.47423191 C2.4197225,3.7246779 2.21823588,3.92616452 1.96778989,3.92616452 Z" id="Path"></path>
                <path d="M13.7180377,10.1025768 C13.7180377,10.4353708 13.9878205,10.7051536 14.3206145,10.7051536 C14.6534085,10.7051536 14.9231913,10.4353708 14.9231913,10.1025768 C14.9231913,9.76978283 14.6534085,9.5 14.3206145,9.5 C13.9878205,9.5 13.7180377,9.76978283 13.7180377,10.1025768 Z" id="Path"></path>
                <path d="M17.3334985,17.1828543 L2.8716551,17.1828543 C1.29365709,17.1828543 0.00941526264,15.8986125 0.00941526264,14.3206145 L0.00941526264,1.96778989 C0.00941526264,1.7173439 0.210901883,1.51585728 0.461347869,1.51585728 C0.711793855,1.51585728 0.913280476,1.7173439 0.913280476,1.96778989 C0.913280476,2.54965312 1.38592666,3.02229931 1.96778989,3.02229931 L17.3334985,3.02229931 C17.5839445,3.02229931 17.7854311,3.22378593 17.7854311,3.47423191 L17.7854311,8.29484638 C17.7854311,8.54529237 17.5839445,8.74677899 17.3334985,8.74677899 C17.0830525,8.74677899 16.8815659,8.54529237 16.8815659,8.29484638 L16.8815659,3.92616452 L1.96778989,3.92616452 C1.57988107,3.92616452 1.21833499,3.81318137 0.913280476,3.6173439 L0.913280476,14.3206145 C0.913280476,15.3996036 1.79266601,16.2789891 2.8716551,16.2789891 L16.8815659,16.2789891 L16.8815659,11.9103072 C16.8815659,11.6598612 17.0830525,11.4583746 17.3334985,11.4583746 C17.5839445,11.4583746 17.7854311,11.6598612 17.7854311,11.9103072 L17.7854311,16.7309217 C17.7854311,16.9813677 17.5839445,17.1828543 17.3334985,17.1828543 Z" id="Path"></path>
                <path d="M18.5386521,12.3622398 L14.3206145,12.3622398 C13.0740337,12.3622398 12.0609514,11.3491576 12.0609514,10.1025768 C12.0609514,8.85599604 13.0740337,7.84291378 14.3206145,7.84291378 L18.5386521,7.84291378 C18.7890981,7.84291378 18.9905847,8.0444004 18.9905847,8.29484638 L18.9905847,11.9103072 C18.9905847,12.1607532 18.7890981,12.3622398 18.5386521,12.3622398 Z M14.3206145,8.74677899 C13.5730426,8.74677899 12.9648167,9.35500496 12.9648167,10.1025768 C12.9648167,10.8501487 13.5730426,11.4583746 14.3206145,11.4583746 L18.0867195,11.4583746 L18.0867195,8.74677899 L14.3206145,8.74677899 Z" id="Shape" fill-rule="nonzero"></path>
            </g>
        </g>
    </g>
</svg>`,
                icon2: `<svg viewBox="0 0 19 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="wallet--2">
            <g id="wallet-" transform="translate(0.000000, 0.000000)">
                <path d="M1.96778989,3.92616452 C0.888800793,3.92616452 0.00941526264,3.04677899 0.00941526264,1.96778989 C0.00941526264,0.888800793 0.888800793,0.00941526264 1.96778989,0.00941526264 L14.0193261,0.00941526264 C14.2697721,0.00941526264 14.4712587,0.210901883 14.4712587,0.461347869 L14.4712587,1.66650149 C14.4712587,1.91694747 14.2697721,2.11843409 14.0193261,2.11843409 C13.7688801,2.11843409 13.5673935,1.91694747 13.5673935,1.66650149 L13.5673935,0.913280476 L1.96778989,0.913280476 C1.38592666,0.913280476 0.913280476,1.38592666 0.913280476,1.96778989 C0.913280476,2.54965312 1.38592666,3.02229931 1.96778989,3.02229931 C2.21823588,3.02229931 2.4197225,3.22378593 2.4197225,3.47423191 C2.4197225,3.7246779 2.21823588,3.92616452 1.96778989,3.92616452 Z" id="Path" class="mainfillcolor"></path>
                <rect id="Rectangle" class="mainfillcolor opacity5" x="2.9" y="5.75" width="13.25" height="9.71666667" rx="1"></rect>
                <path d="M13.7180377,10.1025768 C13.7180377,10.4353708 13.9878205,10.7051536 14.3206145,10.7051536 C14.6534085,10.7051536 14.9231913,10.4353708 14.9231913,10.1025768 C14.9231913,9.76978283 14.6534085,9.5 14.3206145,9.5 C13.9878205,9.5 13.7180377,9.76978283 13.7180377,10.1025768 Z" id="Path" class="mainfillcolor"></path>
                <path d="M17.3334985,17.1828543 L2.8716551,17.1828543 C1.29365709,17.1828543 0.00941526264,15.8986125 0.00941526264,14.3206145 L0.00941526264,1.96778989 C0.00941526264,1.7173439 0.210901883,1.51585728 0.461347869,1.51585728 C0.711793855,1.51585728 0.913280476,1.7173439 0.913280476,1.96778989 C0.913280476,2.54965312 1.38592666,3.02229931 1.96778989,3.02229931 L17.3334985,3.02229931 C17.5839445,3.02229931 17.7854311,3.22378593 17.7854311,3.47423191 L17.7854311,8.29484638 C17.7854311,8.54529237 17.5839445,8.74677899 17.3334985,8.74677899 C17.0830525,8.74677899 16.8815659,8.54529237 16.8815659,8.29484638 L16.8815659,3.92616452 L1.96778989,3.92616452 C1.57988107,3.92616452 1.21833499,3.81318137 0.913280476,3.6173439 L0.913280476,14.3206145 C0.913280476,15.3996036 1.79266601,16.2789891 2.8716551,16.2789891 L16.8815659,16.2789891 L16.8815659,11.9103072 C16.8815659,11.6598612 17.0830525,11.4583746 17.3334985,11.4583746 C17.5839445,11.4583746 17.7854311,11.6598612 17.7854311,11.9103072 L17.7854311,16.7309217 C17.7854311,16.9813677 17.5839445,17.1828543 17.3334985,17.1828543 Z" id="Path" class="mainfillcolor"></path>
                <path d="M18.5386521,12.3622398 L14.3206145,12.3622398 C13.0740337,12.3622398 12.0609514,11.3491576 12.0609514,10.1025768 C12.0609514,8.85599604 13.0740337,7.84291378 14.3206145,7.84291378 L18.5386521,7.84291378 C18.7890981,7.84291378 18.9905847,8.0444004 18.9905847,8.29484638 L18.9905847,11.9103072 C18.9905847,12.1607532 18.7890981,12.3622398 18.5386521,12.3622398 Z M14.3206145,8.74677899 C13.5730426,8.74677899 12.9648167,9.35500496 12.9648167,10.1025768 C12.9648167,10.8501487 13.5730426,11.4583746 14.3206145,11.4583746 L18.0867195,11.4583746 L18.0867195,8.74677899 L14.3206145,8.74677899 Z" id="Shape" class="mainfillcolor" fill-rule="nonzero"></path>
            </g>
        </g>
    </g>
</svg>`,
                selected: false,
                enable: !ApiHelper.IsDemoMode,
            },
            {
                text: "我的",
                icon: `<svg viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="我的" transform="translate(1.000000, 1.000000)" class="textstroke" stroke-width="0.8">
            <g id="分组-26">
                <circle id="椭圆形-copy-10" cx="10" cy="10" r="10"></circle>
                <path d="M10,17.1524564 C12.9361974,17.1524564 15.3164557,14.7491005 15.3164557,11.7844108 C15.3164557,8.81972116 12.9361974,10.4440472 10,10.4440472 C7.0638026,10.4440472 4.6835443,8.81972116 4.6835443,11.7844108 C4.6835443,14.7491005 7.0638026,17.1524564 10,17.1524564 Z" id="椭圆形-copy-11"></path>
            </g>
        </g>
    </g>
</svg>`,
                icon2: `<svg viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="组件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="分组-5" transform="translate(1.000000, 1.000000)">
            <path d="M11.3069666,14.9861949 C13.6856386,14.9861949 15.6139332,12.9747242 15.6139332,10.4934493 C15.6139332,8.01217444 13.6856386,9.37164197 11.3069666,9.37164197 C8.92829463,9.37164197 7,8.01217444 7,10.4934493 C7,12.9747242 8.92829463,14.9861949 11.3069666,14.9861949 Z" id="椭圆形-copy-9" class="mainfillcolor opacity6"></path>
            <g id="我的-copy" class="mainstrokecolor" stroke-width="0.8">
                <g id="分组-26">
                    <circle id="椭圆形-copy-10" cx="10" cy="10" r="10"></circle>
                    <path d="M10.5,17 C13.5375661,17 16,14.6478723 16,11.7463757 C16,8.84487909 13.5375661,10.4345822 10.5,10.4345822 C7.46243388,10.4345822 5,8.84487909 5,11.7463757 C5,14.6478723 7.46243388,17 10.5,17 Z" id="椭圆形-copy-11"></path>
                </g>
            </g>
        </g>
    </g>
</svg>`,
                selected: false,
                enable: !ApiHelper.IsDemoMode,
            }
        ];

        this.model.textRes = (<any>window).textRes;

        this.vm = new Vue({
            el: this.getViewModelElement(),
            data: this.model,
            methods: {
                itemClick: (index) => this.itemClick(index),
            },
        });
        
        //vm绑定后，this.element元素都会变化，所以，this.pages应该在vm绑定后，再实例化，也避免pages里面的html受vm的影响
        this.pages[1] = new Quotation();
        this.pages[1].setParent(this.element.querySelector("#pageContainer"));
        this.pages[1].visible = ApiHelper.IsDemoMode ? true : false;

        this.pages[2] = new Position();
        this.pages[2].setParent(this.element.querySelector("#pageContainer"));
        this.pages[2].visible = false;

        this.pages[3] = new Assets();
        this.pages[3].setParent(this.element.querySelector("#pageContainer"));
        this.pages[3].visible = false;

        this.pages[4] = new My();
        this.pages[4].setParent(this.element.querySelector("#pageContainer"));
        this.pages[4].visible = false;

        this.pages[0] = new Home();
        this.pages[0].setParent(this.element.querySelector("#pageContainer"));
        this.pages[0].visible = ApiHelper.IsDemoMode ? false : true;

        this.model.tabs[this.pages.findIndex(m => m.visible)].selected = true;

        if (ApiHelper.IsDemoMode) {
            this.getAccountInfo();
        }
    }

    async getAccountInfo() {
        try {

            var ret = await AccountApi.GetAccountInfo(null);
            if (ret.accountMoneyInfo.isTrue) {
                Setting.changeFromAppStore();
            }

        } catch (e) {
            window.setTimeout(async () => this.getAccountInfo() , 1000);
        }       
    }


    /**切换到行情页 */
    activeQuotation() {
        if (DemoTrade.instance) {
            DemoTrade.instance.activeQuotation();
            return;
        }
        for (var i = 0; i < this.pages.length; i++) {
            if ((<any>this).pages[i].constructor  === Quotation) {
                this.itemClick(i);
                break;
            }
        }
    }
    /**切换到持仓页 */
    activePosition() {
        if (DemoTrade.instance) {
            DemoTrade.instance.activePosition();
            return;
        }
        for (var i = 0; i < this.pages.length; i++) {
            if ((<any>this).pages[i].constructor === Position) {
                this.itemClick(i);
                break;
            }
        }
    }
    itemClick(index) {
        if (index < this.pages.length) {
            this.model.tabs[index].selected = true;
            this.pages[index].visible = true;
        }

        this.model.tabs.forEach((item, itemindex) => {
            if (item.selected && itemindex != index) {
                item.selected = false;
                this.pages[itemindex].visible = false;
                this.pages[itemindex].onNavigationUnActived(false);
            }
        });

        if (index < this.pages.length) {
            this.pages[index].onNavigationActived(false);
        }

        if (this.pages[index].needLogin && !ApiHelper.CurrentTokenInfo) {
            navigation.push(new Login());
        }
    }

    private settedBottom = false;
    onNavigationActived() {
        super.onNavigationActived(false);

        if ((<any>window).api && !this.settedBottom) {
            this.settedBottom = true;
            var originalHeight = (<HTMLElement>this.element.querySelector("#pageTab")).offsetHeight;
            if ((<any>window).api.safeArea.bottom > 0) {
                originalHeight = originalHeight + ((<any>window).api.safeArea.bottom);
                (<HTMLElement>this.element.querySelector("#pageTab")).style.height = originalHeight + "px";
                (<HTMLElement>this.element.querySelector("#pageContainer")).style.bottom = originalHeight + "px";
            }
            
        }
        this.pages.forEach((item, itemindex) => {
            if (item.visible) {
                item.onNavigationActived(false);
            }
        });
        
    }

    onNavigationUnActived(isPop: boolean) {
        super.onNavigationUnActived(isPop);

        this.pages.forEach((item, itemindex) => {
            if (item.visible) {
                item.onNavigationUnActived(isPop);
            }
        });
    }
}